<!DOCTYPE html>
<html>
<head>
    <title>Flask SocketIO Chat Example</title>
    <script src="https://cdn.socket.io/3.1.3/socket.io.min.js"></script>
    <script>
        var socket = io.connect('http://' + document.domain + ':' + location.port);

        socket.on('connect', function() {
            console.log('connected to server');
        });

        socket.on('message', function(data) {
            print(data)
        });
        
        socket.on('show', function(msg) {
            console.log('Received show event with message:', msg);
            var h1 = document.createElement('h1');
            h1.textContent = msg;
            document.body.appendChild(h1);
        });
    
        socket.on('show_question', function(question) {
            var questionElement = document.getElementById('question');
            questionElement.textContent = question;
        });
        
        function sendMessage() {
            var input = document.querySelector('#username');
                // console.log(window.location.href + input.value);
                // window.location.assign(window.location.href + input.value);
                socket.send(input.value);
                input.value = '';
        }
        
        function sendQuestion() {
            var question = generateQuestion();
            socket.emit('send_question', question);
        }

        function generateQuestion() {
            // 生成問題的邏輯
            // 返回生成的問題
            var question = "這是一個問題";
            return question;
        }





    </script>
</head>
<body>
    <h2 id="greeting"></h2>
    <input id="username" type="text">
    <button onclick="sendMessage()">Send</button>
    <script>
    var params = new URLSearchParams(window.location.search);
    var username = params.get('username');

    // 顯示歡迎詞
    var greetingElement = document.getElementById('greeting');
    greetingElement.textContent = 'Hello ' + username;
    </script>
</body>
</html>